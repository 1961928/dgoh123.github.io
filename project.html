<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /*h1{text-align: center;}*/
    </style>

    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
    <link rel="stylesheet" href="style_project.css">
</head>
<body>

    <div class="myWeek2">
        <a href="Homepage.html" id="link3" class="button3">Home</a>
        <a href="portfolio.html" id="link4" class="button4">My Portfolio</a>
        <a href="https://github.com/1961928/1961928.github.io" id="link5" class="button5">My Github page</a>

        <h1>This is my data science project</h1>
        <h3>Aim</h3>
        <p>
            The aim of the project is to use data to answer whether buying a house is a hedge against inflation and see if it is possible to predict future house prices so that we can determine whether to buy a house or not. As the COVID-19 pandemic is slowly coming to an end and people have begun to return to their normal lives, the US has been suffering from the highest level of inflation in 40 years. In theory, as the value of mortgage debt repayments falls with inflation, people could protect themselves from inflation if house prices keep up with the inflation rate. In this project, I will attempt to determine whether buying a house can be a good hedge against inflation by comparing the rise in the consumer price index (CPI) with the house price index (HPI) and use machine learning to create a linear regression model to make predictions on future house prices to help make better investment decisions.
        </p>
            <h3>Prediction of House Prices using Linear Regression</h3>
        <img src="https://raw.githubusercontent.com/1961928/dgoh123.github.io/main/graph33_HP.svg" alt="house price graph" class="svg">
        <h3>Distribution of House Price Prediction Model</h3>
        <img src="img/graph41_HP.svg" alt="house price graph" class="svg">
        <h3>Prediction of House Values using Linear Regression</h3>
        <img src="img/graph34_HVI.svg" alt="house value graph" class="svg">
        <h3>Distribution of House Value Prediction Model</h3>
        <img src="img/graph40_HVI.svg" alt="house value graph" class="svg">
        <h3>The data I used, how I accessed it and notes on automation/replication:</h3>
        <p>
            Most of the data I used was from FRED. I used the all-transactions house price index and the consumer price index for all urban consumers for the line graph and scatter graph. This data was retrieved by using an API and downloaded as a csv file. For the map, I used data from the Federal Housing Finance Agency (FHFA). The data showed the change in the FHFA state house price index. Lastly, for the machine learning model, I used multiple variables that could help predict house prices. The data I used were CPI, GDP, average 30-year fixed rate mortgage rate, real median household income, rental vacancy rate, monthly supply of new houses, employment level and consumer sentiment. The data for these variables were batch downloaded from FRED using fredapi. Lastly, for the house prices, I used the raw data for the weekly median sale price for all homes in the Zillow database. The data I used for the home values is the Zillow Home Value Index (ZHVI) which gives a measure of a typical value of a house in the 35th to 65th percentile.
        </p>
        <h3>Map of US showing HPI by State</h3>
        
        <div class="chart" id="Chart1"></div>
        

<h3>
    Challenges in data cleaning and/or analysis, and the tools used to overcome them:
    </h3> 

<p>
    For the machine learning model, I merged the data of the predictor variables using the concat() function. Some data such as the CPI was released monthly while other data such as the real median income was released annually. I therefore had to assume the data for the income was the same until the next year and filled in the missing data using ffill(). I then converted the dates in the house price and house value data into a year-month format using the to_datetime and to_period function and merged the two files using the dates column. As the Zillow data was released two days after the FRED data, I used the timedelta function to shift the FRED data forward by two days so that the dates were aligned and could be merged.
    For the prediction, I used linear regression from the Scikit-learn package and fit the training data into the model. I then used the predict() function to create a prediction and plotted it against the actual house price to be able to determine whether the predictions were accurate. The main difficulty was finding the right variables that would help predict house prices.
    
</p> 


<!--
<div class="chart" id="Chart2"></div>

<div class="chart" id="Chart3"></div>

-->

<h3>Scatter graph of CPI and House Price Index</h3>
<div class="chart" id="Chart4"></div>

<h3>Line chart of CPI and House Price Index</h3>

<div class="chart" id="Chart5"></div>

<h3>Conclusion</h3>

<p>The scatter graph of CPI and HPI suggests that house prices are highly correlated with inflation although between 2008-2012, the HPI drops around 62 points while the CPI increases by around 16 points. The line graphs show that HPI has outpaced inflation since 1975 and is more than double the CPI in 2022. The map shows that HPI has increased significantly since 1991 and has been rising the past 12 months in all states in the US. Results from the machine learning model show that the model was relatively accurate in predicting house prices and house values, but the house price prediction has a smoother bell curve than house values. This project can be extended by adding new datasets such as geographical data in which the machine learning model can use to not only improve the accuracy, but also make price predictions by state or city. </p>
<p>To conclude, basing investment decisions on the machine learning model alone should be avoided until the accuracy of the model is improved. However, buying a house is indeed a good hedge against inflation as data has shown the price of property tends to rise over time and may also outpace the rate of inflation.</p>
<h3>Links to Code</h3>

<p>Link to Colab: <a href="https://github.com/1961928/1961928.github.io/blob/main/Final_Project_Data_Science_regression2.ipynb" class = "linkcolab">Code for house price prediction</a></p> 

<p>Link to Colab: <a href="https://github.com/1961928/1961928.github.io/blob/main/Final_Project_DS_cleaning_data.ipynb" class = "linkcolab">Code for cleaning data </a></p> 

<p>Link to Colab: <a href="https://github.com/1961928/1961928.github.io/blob/main/Final_Project_Data_Science_api.ipynb" class = "linkcolab">Code for API </a></p> 

<p>Link to code for map:<a href="https://github.com/1961928/1961928.github.io/blob/main/map_hpi.json" class = "linkcolab">Map code</a></p> 

<p>Link to code for scatter graph:<a href="https://github.com/1961928/1961928.github.io/blob/main/regression_cpi_hpi_.json" class = "linkcolab">Scatter graph code</a></p>

<p>Link to code for line graph:<a href="https://github.com/1961928/1961928.github.io/blob/main/CPI_HPI.json" class = "linkcolab">Line graph code</a></p>

<h3>Reference List</h3>
<p>U.S. Bureau of Labor Statistics, Consumer Price Index for All Urban Consumers: All Items in U.S. City Average [CPIAUCSL], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/CPIAUCSL, January 7, 2023.</p>
<p>U.S. Bureau of Economic Analysis, Gross Domestic Product [GDP], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/GDP, January 7, 2023.</p>
<p>Freddie Mac, 30-Year Fixed Rate Mortgage Average in the United States [MORTGAGE30US], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MORTGAGE30US, January 7, 2023.</p>
<p>U.S. Census Bureau, Real Median Household Income in the United States [MEHOINUSA672N], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MEHOINUSA672N, January 7, 2023.</p>
<p>U.S. Census Bureau, Rental Vacancy Rate in the United States [RRVRUSQ156N], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/RRVRUSQ156N, January 7, 2023.</p>
<p>U.S. Census Bureau and U.S. Department of Housing and Urban Development, Monthly Supply of New Houses in the United States [MSACSR], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MSACSR, January 7, 2023.</p>
<p>U.S. Bureau of Labor Statistics, Employment Level [LNU02000000], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/LNU02000000, January 7, 2023.</p>
<p>University of Michigan, University of Michigan: Consumer Sentiment [UMCSENT], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/UMCSENT, January 7, 2023.</p>
<p>ZHVI All Homes(SFR, Condo/Co-op) Time Series, Raw, Mid-Tier($), retrieved from Zillow; https://www.zillow.com/research/data/, January 7, 2023.</p>
<p>Median Sale Price (Raw, All Homes, Weekly), retrieved from Zillow; https://www.zillow.com/research/data/, January 7, 2023.</p>


</div>
</body>

<script>
    //Define charts:
    var myChart1 = "map_hpi.json";
    var myChart2 = "cpi.json";
    var myChart3 = "price_index.json";
    var myChart4 = "regression_cpi_hpi_.json";
    var myChart5 = "CPI_HPI.json";

    
    // Embed charts:
    vegaEmbed('#Chart1', myChart1);
    vegaEmbed('#Chart2', myChart2);
    vegaEmbed('#Chart3', myChart3);
    vegaEmbed('#Chart4', myChart4);
    vegaEmbed('#Chart5', myChart5);


</script>


</html>